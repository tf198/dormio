<?/*** Factory for creating Dormio models and managers** @author Tris Forster <tris@tfconsulting.com.au>* @version 0.3* @package dormio* @license http://www.gnu.org/licenses/lgpl.txt GNU Lesser General Public License v3** This program is free software: you can redistribute it and/or modify* it under the terms of the GNU Lesser General Public License as published by* the Free Software Foundation, either version 3 of the License, or* (at your option) any later version.** This program is distributed in the hope that it will be useful,* but WITHOUT ANY WARRANTY; without even the implied warranty of* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the* GNU General Public License for more details.** You should have received a copy of the GNU Lesser General Public License* along with this program.  If not, see <http://www.gnu.org/licenses/>.*//*** Factory for creating Dormio models and managers** @author Tris Forster <tris@tfconsulting.com.au>* @version 0.3* @package dormio* @license http://www.gnu.org/licenses/lgpl.txt GNU Lesser General Public License v3*/class Dormio_Factory {  static $_cache = array();  static $instances = array();    function __construct(PDO $db) {    $this->db = $db;    $this->dialect = Dormio_Dialect::factory($db->getAttribute(PDO::ATTR_DRIVER_NAME));  }    function get($model, $pk=null) {    if(!class_exists($model)) throw new Dormio_Exception('No such model: ' . $model);    $obj = new $model($this->db, $this->dialect);    if($pk) $obj->load($pk);    return $obj;  }    function manager($name) {    if(!isset(self::$_cache[$name])) self::$_cache[$name] = new Dormio_Manager($name, $this->db, $this->dialect);    return self::$_cache[$name];  }}?>