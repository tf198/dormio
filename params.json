{"note":"Don't delete this file! It's used internally to help with page regeneration.","tagline":"Lightweight but fully featured  PHP5 database interaction library.","google":"","name":"Dormio","body":"# Dormio\r\n**WARNING:** Code still very much alpha - use at your own risk!\r\n\r\n## About\r\n\r\n### Introduction (or 'Why another PHP database library')\r\n\r\n1. Because I want to interact with my data in as clean and simple a way as Django models.\r\n2. Because I don't think you should have to run an OpCache to get a decent featureset.\r\n\r\nDormio is a lightweight but fully featured database library designed to take the pain out of dealing with your data.\r\nIt uses a powerful query syntax similar to [Django](https://www.djangoproject.com/) that generates efficient SQL, joining tables as necessary and supports \r\neager loading of objects for minimum queries.  It can also generate forms, tables and schema SQL all from the one entitiy\r\ndescription so when you change your database you only have to update one config array.\r\n\r\n### Design Features\r\n\r\n* DRY - define your entities once. Full stop.\r\n* No framework requirement but usable in any.\r\n* Built directly on PDO - no separate abstraction layer.\r\n* Memory concious - under 900KB in memory.\r\n* Config in PHP - no XML or YAML config or compilation.\r\n* PHP5+ compatible.\r\n* <del>Fully</del> unit tested (PHPUnit).\r\n* <del>Fully</del> documented code.\r\n\r\n### Alternatives\r\n\r\nWhile looking for a lightweight alternative to Doctrine/Propel I found the following projects which\r\nwhile not suitable for my project may be of interest:\r\n\r\n* [OutletORM](http://www.outlet-orm.org/site/) - Nice hibernate inspired library\r\n* [NotORM](http://www.notorm.com/) - Interesting approach to database interaction\r\n\r\n### Documentation\r\nCurrently limited to the phpDocumentor generated API docs at http://www.tfconsulting.com.au/~tris/dormio/0.8/api, though\r\nyou can get a good idea of the functionality by looking at the [examples](/tf198/dormio/blob/0.8/docs/examples)\r\n\r\n## Changelog\r\n\r\n### 0.9 planned features\r\n\r\n* Turbo runtime - compile queries once\r\n* Global statement cache\r\n* jQuery widget integration\r\n* Finish documentation and unit tests\r\n\r\n### 0.8\r\nThis is a complete rewrite of the original project with the configuration system changed to array and\r\na more object orientation approach.\r\n\r\n* PSR-0 compatible structure\r\n* Better class organisation - less *black magic*\r\n* Performance improvements\r\n* Removed all factory and singleton patterns\r\n* Entities now declared in config instead of on the object\r\n\r\n### 0.6\r\nThe first real version that could be used in another project.  Contained a lot of black magic so proved\r\nto be unmaintainable.\r\n\r\n## Examples\r\n\r\n### 1) Define your entities: [entities.php](/tf198/dormio/blob/0.8/docs/examples/entities.php)\r\n```php\r\n<?\r\n$entities = array(\r\n   'Blog' => array(\r\n      'fields' => array(\r\n      \t'title' => array('type' => 'string', 'max_length' => 30),\r\n      \t'author' => array('type' => 'foreignkey', entity='User'),\r\n      ),\r\n   ),\r\n   ...\r\n);\r\n?>\r\n```\r\n\r\n### 2) Set up the connection\r\n```php\r\n<?\r\n// database connection is just a plain old PDO\r\n$pdo = new PDO(':sqlite::memory');\r\n\r\n$config = new Dormio_Config;\r\n$config->addEntities($entities);\r\n\r\n$dormio = new Dormio($pdo, $config);\r\n// you are now ready to go\r\n?>\r\n```\r\n\r\n### 3) Automatically create tables (optional): [schema.php](/tf198/dormio/blob/0.8/docs/examples/schema.php)\r\n```php\r\n<?\r\n$admin = new Dormio_Admin($dormio);\r\n$admin->syncDB();\r\n?>\r\n```\r\n\r\n### 4) Manipulate your data: [usage.php](/tf198/dormio/blob/0.8/docs/examples/usage.php)\r\nAll the standard object interaction methods with support for eager loading, aggregation and cross\r\ntable queries.\r\n```php\r\n<?\r\n$blogs = $dormio->getManager('Blog');\r\nforeach($blogs->filter('author__profile__age', '<', 18) as $blog {\r\n   $blog->title = \"## This blog has been censored ##\";\r\n   $blog->save();\r\n}\r\n\r\n// you can actually achieve the above in a single query\r\n$blogs->filter('author__profile__age', '<', 18)->update('title' => '## This blog has been censored ##');\r\n?>\r\n```\r\n\r\n### 5) Create forms from objects: [forms.php](/tf198/dormio/blob/0.8/docs/examples/forms.php)\r\nAutomatically generate a form to interact with your record including the relationships.  Data is validated\r\nagainst the database type and also custom validators. Subclass Dormio_Form to get infinite control over the \r\nfields and add more complex multi-field validation rules.\r\n```php\r\n<?\r\n$blog = $dormio->getObject('Blog', 1);\r\n$form = new Dormio_Form($blog);\r\n\r\necho $form\r\n?>\r\n```\r\n![Example Form](/tf198/dormio/raw/0.8/docs/images/example_form.png)\r\n\r\n### 6) Create tables from queries: [tables.php](/tf198/dormio/blob/0.8/docs/examples/tables.php)\r\nGenerate paged, sortable tables from your entities in one line, or customise to your hearts content.\r\n```php\r\n<?\r\n$query = $dormio->getManager('Comment')->filter('tags__tag', 'IN', array('Red', 'Green'));\r\n$table = new Dormio_Table_query($query);\r\n\r\necho $table;\r\n?>\r\n```\r\n![Example Table](/tf198/dormio/raw/0.8/docs/images/example_table.png)\r\n(Not the actual table from the above query)\r\n\r\n## Why Dormio?\r\nBeing so closely related to Django ('_I Awake_' in Roma) then Dormio ('_I Sleep_' in Latin) seemed appropriate,\r\nespecially following in the footsteps of Java's Hibernate.\r\n"}